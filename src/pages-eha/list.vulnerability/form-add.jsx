import { useForm } from "react-hook-form";
import { Form } from "../../components.eha/input";
import { ModalsComponent, ModalSuccess } from "../../components.eha/modal";
import { CardBox } from "../../components/layout/card";
import { TitleContent } from "../../components/layout/title";
import { GetAndUpdateContext } from "../../model/context.function";

export const FormAdd = () => {
    const { setStatus } = GetAndUpdateContext()
    const { register, handleSubmit, setValue, unregister, watch, formState: { errors } } = useForm();
    const onSubmit = data => {
        ModalSuccess()
    };


    return (
        <ModalsComponent footer={false} width={"100%"} style={`
              
                padding: 20px!important;
                .ant-modal-content {
                    width: 100%;
                    min-width: 100%;
                }
            `} modalName={"addvul"}>
            <CardBox>
                <form className="space-y-6" onSubmit={handleSubmit(onSubmit)}>
                    <TitleContent>
                        <div className="text-[24px] uppercase text-blue">add vulnerabilities</div>
                    </TitleContent>
                    <Form.input register={register("finding")} label={"Finding"} />
                    <div className="grid grid-cols-3 gap-4">
                        <Form.input type="date" register={register("creation_date")} label={"creation date"} />
                        <Form.input register={register("stage")} label={"stage*"} />
                        <Form.input register={register("assessment_type")} label={"assessment type*"} />

                    </div>
                    <div className="grid grid-cols-4 gap-4">
                        {/* <Form.input register={register("scanning_tool")} label={"scanning tool"} /> */}
                        <Form.input register={register("found_by")} label={"found by"} />
                        <Form.input register={register("risk_level")} label={"risk level"} />
                        <Form.input register={register("severity")} label={"severity"} />
                    </div>
                    <Form.input register={register("target")} label={"target"} />
                    <div className="grid grid-cols-2 gap-4">
                        <Form.input register={register("finding_owner")} label={"finding owner"} />
                        <Form.input register={register("finding_owner_email")} label={"Finding owner email"} />

                    </div>
                    <div className="grid grid-cols-3 gap-4">
                        <Form.input register={register("protected_site")} label={"Data Center"} />
                        <Form.input register={register("system_owner")} label={"system owner"} />
                        <Form.input register={register("site_owner")} label={"site owner"} />
                    </div>
                    <Form.texarea register={register("finding_description")} label={"finding description"} />
                    <Form.texarea register={register("details")} label={"details"} />
                    <Form.texarea register={register("solution")} label={"solution"} />
                    <Form.texarea register={register("affected_urls")} label={"affected urls / application or type"} />
                    <Form.texarea register={register("reference_link")} label={"reference link"} />
                    <Form.texarea register={register("external_reference")} label={"external reference"} />

                    <div className="flex gap-4">
                        <Form.check register={register("personal_data_leakage")} text={"personal data leakage"}></Form.check>
                        <Form.check register={register("operation_disruption")} text={"operation_disruption"}></Form.check>
                        <Form.check register={register("payment_card_leakage")} text={"payment card leakage"}></Form.check>
                        <Form.check register={register("defacement")} text={"defacement"}></Form.check>
                    </div>
                    <Form.texarea register={register("remarks")} label={"remarks"} />
                    <div className="grid grid-cols-2 gap-4">
                        <Form.input register={register("qc_staff")} label={"qc staff*"} />
                        <Form.input register={register("qa_staff")} label={"qA staff*"} />
                    </div>
                    <div className="grid grid-cols-2 gap-4">
                        <Form.input type={"date"} register={register("deadline_date")} label={"deadline date*"} />
                        <Form.input type={"date"} register={register("re-open_time")} label={"re-open time*"} />
                    </div>
                    <Form.texarea register={register("screen_captures_and_details")} label={"screen captures and details"} />
                    <Form.texarea register={register("re-test_details")} label={"re-test details"} />
                    <Form.input type="file" register={register("attachments")} label={"attachments"} />
                    <Form.check register={register("accept_risk")} text={"accept risk"}></Form.check>
                    <Form.check register={register("mark_as")} text={"mark as continuous monitoring"}></Form.check>
                    <Form.check register={register("acknowledge_vulnerability")} text={"acknowledge vulnerability (for finding owner)"}></Form.check>
                    <Form.check register={register("close_without")} text={"close (without rescan)"}></Form.check>
                    <Form.check register={register("close_confirm")} text={"close (confirm with rescan))"}></Form.check>
                    <div className="grid grid-cols-2 gap-4">
                        <Form.input type={"date"} register={register("scheduled_rescan_date")} label={"scheduled rescan date"} />
                        <Form.input type={"date"} register={register("scheduled_rescan_date")} label={"scheduled rescan date"} />
                    </div>
                    <Form.texarea register={register("remediation_result")} label={"remediation result"} />
                    {/* <div className="grid grid-cols-3 gap-7">
                        <div className="space-y-8">
                            <Form.input register={register("tools_scanner")} label={"TOOLS SCANNER"} />
                            <div className="grid grid-cols-2 gap-4">
                                <Form.date register={register("sla_date")} label={"SLA DATE"} />
                                <Form.input register={register("tools_scanner")} label={"TOOLS SCANNER"} />
                            </div>
                            <Form.input register={register("recipient_email")} label={"RECIPIENT EMAIL"} />
                            <Form.input register={register("attachments")} label={"attachments"} />
                        </div>
                        <div className="space-y-8 col-span-2 flex flex-col">
                            <Form.date register={register("dates_and_schedules")} label={"DATES AND SCHEDULES"} />
                            <Form.date register={register("scheduled_start_time")} label={"SCHEDULED START TIME"} />
                            <div className="flex flex-1 w-full">
                                <Form.texarea classNameInput="h-full" className="w-full h-full" label={"REMARKS"}></Form.texarea>
                            </div>
                        </div>
                    </div> */}
                    <div className="flex justify-end gap-4">
                        <div className=" cursor-pointer min-w-[120px] bg-primary py-4 text-center text-red-500" onClick={() => {
                            setStatus(d => ({ ...d, addvul: false }))
                        }}>CANCEL</div>
                        <button type="submit" className=" min-w-[120px] bg-primary py-4">SAVE</button>
                    </div>
                </form>
            </CardBox>
        </ModalsComponent>
    )
}